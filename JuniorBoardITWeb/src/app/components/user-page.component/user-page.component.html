<section class="body">
  <div class="row">
    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-8">
      <h1 class="page-title">{{ translations.Get('User_User') }}</h1>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-4">
      <p-button
        [label]="translations.Get('General_Cancel')"
        (click)="Cancel()"
        severity="secondary"
        class="margin-right-15"
      ></p-button>
      @if (IsAdminView) {
        <p-button
          [label]="translations.Get('General_Save')"
          (click)="Save()"
          [class.disabled]="form.invalid"
        ></p-button>
      }
    </div>
  </div>

  <div class="row" [formGroup]="form">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      @if (IsAdminView) {
        <div class="row d-flex">
          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
            <span class="data-input-text"> {{ translations.Get('Users_ID') }}: </span>
          </div>
          <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
            <p-inputnumber
              mode="decimal"
              locale="pl-PL"
              [minFractionDigits]="0"
              [maxFractionDigits]="0"
              [placeholder]="translations.Get('Users_ID')"
              formControlName="UID"
            />
          </div>
        </div>

        <div class="row d-flex">
          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
            <span class="data-input-text"> {{ translations.Get('Users_GUID') }}: </span>
          </div>
          <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
            <input
              pInputText
              type="text"
              class="data-input"
              [placeholder]="translations.Get('Users_GUID')"
              formControlName="UGID"
            />
          </div>
        </div>

        <div class="row d-flex">
          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
            <span class="data-input-text"> {{ translations.Get('Users_Role') }}: </span>
          </div>
          <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
            <p-select
              [options]="roles"
              [showClear]="false"
              [filter]="true"
              filterBy="name"
              optionLabel="name"
              optionValue="id"
              inputId="roles"
              aria-describedby="roles"
              formControlName="URID"
            />
          </div>
        </div>
      }

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('User_First_Name') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          <input
            pInputText
            type="text"
            class="data-input"
            [placeholder]="translations.Get('User_First_Name')"
            formControlName="UFirstName"
          />
          @if (form.controls.UFirstName.errors?.['maxlength']) {
            <div class="error-row">
              {{ translations.Get('User_Error_MaxLength50') }}
            </div>
          }
        </div>
      </div>

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('User_Last_Name') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          <input
            pInputText
            type="text"
            class="data-input"
            [placeholder]="translations.Get('User_Last_Name')"
            formControlName="ULastName"
          />
          @if (form.controls.ULastName.errors?.['maxlength']) {
            <div class="error-row">
              {{ translations.Get('User_Error_MaxLength50') }}
            </div>
          }
        </div>
      </div>

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('User_User_Name') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          <input
            pInputText
            type="text"
            class="data-input"
            [placeholder]="translations.Get('User_User_Name')"
            formControlName="UUserName"
          />
          @if (form.controls.UUserName.errors?.['maxlength']) {
            <div class="error-row">
              {{ translations.Get('User_Error_MaxLength100') }}
            </div>
          }
        </div>
      </div>

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('User_Email') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          <input
            pInputText
            type="text"
            class="data-input"
            [placeholder]="translations.Get('User_Email')"
            formControlName="UEmail"
          />
          @if (form.controls.UEmail.errors?.['required']) {
            <div class="error-row">
              {{ translations.Get('Account_Register_Validation_Required') }}
            </div>
          }
          @if (form.controls.UEmail.errors?.['email']) {
            <div class="error-row">
              {{ translations.Get('Account_Register_Validation_Email') }}
            </div>
          }
          @if (form.controls.UEmail.errors?.['maxlength']) {
            <div class="error-row">
              {{ translations.Get('User_Error_MaxLength100') }}
            </div>
          }
        </div>
      </div>

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('User_Phone') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          <input
            pInputText
            type="text"
            class="data-input"
            [placeholder]="translations.Get('User_Phone')"
            formControlName="UPhone"
          />
          @if (form.controls.UPhone.errors?.['maxlength']) {
            <div class="error-row">
              {{ translations.Get('User_Error_MaxLength100') }}
            </div>
          }
        </div>
      </div>

      <div class="row d-flex">
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 row-textarea">
          <span class="data-input-text"> {{ translations.Get('Users_User_Company') }}: </span>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 row-inputs">
          @if (IsAdminView) {
            @if (Companies$ | async; as companies) {
              <p-select
                [options]="companies"
                [showClear]="false"
                [filter]="true"
                filterBy="CName"
                optionLabel="CName"
                optionValue="CGID"
                inputId="companies"
                aria-describedby="companies"
                formControlName="UCompanyGID"
              />
            }
          } @else {
            {{ form.controls.UCompany ? form.controls.UCompany : 'Firma nie została przypisana do użytkownika' }}
          }
        </div>
      </div>
    </div>
  </div>
</section>
